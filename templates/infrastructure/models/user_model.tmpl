package models

import (
	"{{.ModuleName}}/internal/domain"
)

// UserModel represents the database model for User entity
// This model contains GORM-specific tags and database concerns
type UserModel struct {
	ID    int64  `gorm:"primaryKey;autoIncrement"`
	Name  string `gorm:"type:varchar(255);not null"`
	Email string `gorm:"type:varchar(255);uniqueIndex;not null"`
}

// TableName returns the table name for UserModel
func (UserModel) TableName() string {
	return "users"
}

// ToDomain converts UserModel to domain.User entity
// This allows the domain layer to remain clean of infrastructure concerns
func (m *UserModel) ToDomain() *domain.User {
	if m == nil {
		return nil
	}
	return &domain.User{
		ID:    m.ID,
		Name:  m.Name,
		Email: m.Email,
	}
}

// FromDomain converts domain.User entity to UserModel
// This prepares the entity for database persistence
func FromDomain(user *domain.User) *UserModel {
	if user == nil {
		return nil
	}
	return &UserModel{
		ID:    user.ID,
		Name:  user.Name,
		Email: user.Email,
	}
}

// UpdateFromDomain updates UserModel fields from domain.User
// This is useful for update operations where we want to preserve the model instance
func (m *UserModel) UpdateFromDomain(user *domain.User) {
	if user == nil {
		return
	}
	m.ID = user.ID
	m.Name = user.Name
	m.Email = user.Email
}

